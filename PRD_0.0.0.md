# 产品需求文档 (PRD)

## 现代化博客系统

### 📋 **产品概述**

**产品名称**: Next.js 博客系统  
**产品版本**: v0.0.0 (已完成版本)  
**产品定位**: 基于 Next.js 15 的高性能静态博客站点  
**核心价值**: 提供快速、美观、易用的博客阅读和管理体验

---

## 🚀 **版本 0.0.0 需求清单**

### 1. **基础架构系统**

#### 1.1 技术栈搭建

- [✓] Next.js 15 App Router 架构搭建
- [✓] React 19 + TypeScript 严格模式配置
- [✓] Tailwind CSS + UnoCSS 样式系统集成
- [✓] Zustand 状态管理集成
- [✓] 项目目录结构规划和创建

#### 1.2 构建和部署配置

- [✓] next.config.js 基础配置
- [✓] tsconfig.json TypeScript 配置
- [✓] uno.config.ts UnoCSS 配置
- [✓] package.json 依赖管理

#### 1.3 开发工具配置

- [✓] ESLint 代码规范配置

### 2. **核心组件系统**

#### 2.1 Button 组件系统

- [✓] BaseButton 基础组件实现
- [✓] PrimaryButton 主按钮组件
- [✓] DefaultButton 默认按钮组件
- [✓] TextButton 文本按钮组件
- [✓] LinkButton 链接按钮组件
- [✓] 4 种类型 × 3 种尺寸的完整支持
- [✓] loading 加载状态支持
- [✓] href 链接跳转支持
- [✓] 键盘导航支持（Enter/Space）
- [✓] 可访问性属性支持
- [✓] color 自定义色调支持

#### 2.2 Layout 布局组件系统

- [✓] Layout 主布局组件
- [✓] Header 顶部导航组件
- [✓] Footer 底部信息组件
- [✓] 固定 Header 和内容区域适配
- [✓] 响应式布局适配

#### 2.3 表单和交互组件

- [✓] Select 下拉选择器组件
- [✓] 下拉选项展示和选择
- [✓] 点击外部关闭功能
- [✓] 键盘导航支持

#### 2.4 图标系统

- [✓] Icon 组件基础架构
- [✓] @ant-design/icons iconfont 集成
- [✓] 基础图标支持（github, moon, sun, expand, loading）
- [✓] Icon 组件 CDN 加载问题修复

### 3. **主题和样式系统**

#### 3.1 主题管理

- [✓] Zustand 主题状态管理
- [✓] light/dark 主题模式切换
- [✓] 10 种预设色调支持
- [✓] localStorage 主题偏好持久化
- [✓] DOM class 同步更新
- [✓] 主题切换动画过渡

#### 3.2 颜色处理系统

- [✓] colorUtils 颜色工具函数集
- [✓] hexToRgb 颜色格式转换
- [✓] withAlpha 透明度处理
- [✓] adjustBrightness 亮度调整
- [✓] CSS 变量动态更新
- [✓] 主色调变量系统

#### 3.3 样式工具系统

- [✓] cn 类名合并工具函数
- [✓] clsx + tailwind-merge 集成
- [✓] 自定义滚动条样式
- [✓] hover 显示滚动条效果
- [✓] 主色调滚动条颜色适配

### 4. **博客核心架构**

#### 4.1 数据管理架构

- [✓] lib/blog 面向对象架构设计
- [✓] Blog 类核心数据管理
- [✓] loader.ts 原始数据加载器
- [✓] processor.ts Markdown 处理器
- [✓] 完整的 TypeScript 类型定义

#### 4.2 内容处理系统

- [✓] markdownToHtml HTML 转换功能
- [✓] buildCatalog 目录树生成功能
- [✓] buildMetadata 元数据解析功能
- [✓] gray-matter frontmatter 解析
- [✓] remark + rehype Markdown 处理链
- [✓] 标题 ID 同步和去重处理

#### 4.3 数据类型系统

- [✓] BlogItem 博客文章类型定义
- [✓] MenuNode 菜单节点类型定义
- [✓] CatalogNode 目录节点类型定义
- [✓] RawBlogItem 原始数据类型定义
- [✓] Tags 标签类型定义

### 5. **路由和页面系统**

#### 5.1 路由架构

- [✓] Next.js App Router 架构
- [✓] 动态路由 /blog/[slug] 实现
- [✓] 服务端组件和客户端组件分离
- [✓] layout.tsx 博客布局实现
- [✓] 静态站点生成 (SSG) 支持

#### 5.2 页面实现

- [✓] 网站首页 (/) 基础实现
- [✓] 博客首页 (/blog) 欢迎页面
- [✓] 动态文章页面 (/blog/[slug])
- [✓] UI 演练场页面 (/ui)

#### 5.3 数据传递系统

- [✓] 服务端数据获取和预处理
- [✓] 序列化安全的数据传递
- [✓] 客户端数据接收和渲染
- [✓] 循环引用问题解决方案

### 6. **博客功能系统**

#### 6.1 三栏布局系统

- [✓] 左侧分类导航栏 (280px)
- [✓] 中间文章内容区域 (flex-1)
- [✓] 右侧文章目录栏 (280px)
- [✓] 侧边栏展开收起功能
- [✓] SidebarToggle 通用组件
- [✓] 平滑动画过渡效果

#### 6.2 分类导航系统

- [✓] RecursiveMenu 递归菜单组件
- [✓] 菜单树形结构渲染
- [✓] menu 类型节点展开收起
- [✓] leaf 类型节点文章跳转
- [✓] 当前文章高亮显示
- [✓] 菜单层级缩进显示

#### 6.3 文章目录系统

- [✓] Catalog 文章目录组件
- [✓] 树形目录结构渲染
- [✓] 可展开目录项组件
- [✓] 叶子目录项组件
- [✓] 目录项点击跳转功能
- [✓] 滚动同步高亮功能
- [✓] 进度指示器显示

#### 6.4 文章阅读功能

- [✓] Markdown 文章渲染
- [✓] 文章元数据显示
- [✓] 标题锚点跳转功能
- [✓] 文章标签显示
- [✓] 创建时间显示

### 7. **用户体验功能**

#### 7.1 滚动和导航体验

- [✓] useCatalogObserver Hook 实现
- [✓] IntersectionObserver 滚动监听
- [✓] 自动高亮当前可见标题
- [✓] 防冲突的点击滚动处理
- [✓] 进度指示器位置计算
- [✓] 目录项自动滚动居中

#### 7.2 交互反馈系统

- [✓] 按钮点击缩放效果 (active:scale-95)
- [✓] hover 状态过渡动画
- [✓] 主题切换平滑过渡
- [✓] 侧边栏展开收起动画

#### 7.3 可访问性支持

- [✓] 键盘导航支持
- [✓] ARIA 属性配置
- [✓] 语义化 HTML 结构
- [✓] 色彩对比度适配

### 8. **内容管理系统**

#### 8.1 文章内容管理

- [✓] src/content/blogs/ 目录结构
- [✓] 9 篇技术文章内容
- [✓] Markdown 格式支持
- [✓] frontmatter 元数据支持
- [✓] 标签系统支持

#### 8.2 标签和分类系统

- [✓] 标签自动提取和映射
- [✓] 基于标签的菜单填充
- [✓] tag2BlogMap 标签映射
- [✓] 标签列表生成

#### 8.3 元数据处理

- [✓] 文章标题和描述提取
- [✓] 创建时间格式化 (dayjs)
- [✓] 标签数组处理和去重

### 9. **性能优化系统**

#### 9.1 静态站点生成

- [✓] 构建时 Markdown 预处理
- [✓] HTML 内容预生成
- [✓] 目录树预构建
- [✓] 标签映射预计算
- [✓] 运行时零 API 调用

#### 9.2 代码分割和懒加载

- [✓] Next.js 自动代码分割
- [✓] 动态路由懒加载
- [✓] 组件级代码分割

#### 9.3 构建优化

- [✓] TypeScript 严格模式
- [✓] Tree Shaking 死代码清除

### 10. **开发体验功能**

#### 10.1 UI 开发工具

- [✓] UI 演练场页面 (/ui)
- [✓] Button 组件完整展示
- [✓] 交互示例和状态演示
- [✓] 实时组件预览

#### 10.2 调试和监控

- [✓] 控制台调试信息
- [✓] 错误边界处理

---
